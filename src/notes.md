---
title: "Notes"
date: 2018-10-03
layout: page.njk
pageWidth: "full"
---

<!--
# Style guide
- Italicize names of books, movies, and other long form works.
-->

<h1 class="page-title">Notes</h1>

<svg style="display: none">
  <symbol id="svg-star" viewBox="0 0 512 512"><path d="M463 192H315.9L271.2 58.6C269 52.1 262.9 48 256 48s-13 4.1-15.2 10.6L196.1 192H48c-8.8 0-16 7.2-16 16 0 .9.1 1.9.3 2.7.2 3.5 1.8 7.4 6.7 11.3l120.9 85.2-46.4 134.9c-2.3 6.5 0 13.8 5.5 18 2.9 2.1 5.6 3.9 9 3.9 3.3 0 7.2-1.7 10-3.6l118-84.1 118 84.1c2.8 2 6.7 3.6 10 3.6 3.4 0 6.1-1.7 8.9-3.9 5.6-4.2 7.8-11.4 5.5-18L352 307.2l119.9-86 2.9-2.5c2.6-2.8 5.2-6.6 5.2-10.7 0-8.8-8.2-16-17-16z"/></symbol>
  <symbol id="svg-star-half" viewBox="0 0 512 512"><path d="M463 192H315.9L271.2 58.6C269 52.1 262.9 48 256 48s-13 4.1-15.2 10.6L196.1 192H48c-8.8 0-16 7.2-16 16 0 .9.1 1.9.3 2.7.2 3.5 1.8 7.4 6.7 11.3l120.9 85.2-46.4 134.9c-2.3 6.5 0 13.8 5.5 18 2.9 2.1 5.6 3.9 9 3.9 3.3 0 7.2-1.7 10-3.6l118-84.1 118 84.1c2.8 2 6.7 3.6 10 3.6 3.4 0 6.1-1.7 8.9-3.9 5.6-4.2 7.8-11.4 5.5-18L352 307.2l119.9-86 2.9-2.5c2.6-2.8 5.2-6.6 5.2-10.7 0-8.8-8.2-16-17-16zm-47.4 35.2l-79.8 57.3c-10 7.2-14.2 20.2-10.2 31.8l30.1 87.7c1.3 3.7-2.9 6.8-6.1 4.6l-77.4-55.2-.1-.1c-10-7-16.1-18.3-16.1-30.5V113.3c0-2.2 3.1-2.7 3.8-.6l29.6 88.2c3.8 11.4 14.5 19.1 26.5 19.1h97.3c3.9 0 5.5 5 2.4 7.2z"/></symbol>
  <symbol id="svg-star-outline" viewBox="0 0 512 512"><path d="M463 192H315.9L271.2 58.6C269 52.1 262.9 48 256 48s-13 4.1-15.2 10.6L196.1 192H48c-8.8 0-16 7.2-16 16 0 .9.1 1.9.3 2.7.2 3.5 1.8 7.4 6.7 11.3l120.9 85.2-46.4 134.9c-2.3 6.5 0 13.8 5.5 18 2.9 2.1 5.6 3.9 9 3.9 3.3 0 7.2-1.7 10-3.6l118-84.1 118 84.1c2.8 2 6.7 3.6 10 3.6 3.4 0 6.1-1.7 8.9-3.9 5.6-4.2 7.8-11.4 5.5-18L352 307.2l119.9-86 2.9-2.5c2.6-2.8 5.2-6.6 5.2-10.7 0-8.8-8.2-16-17-16zm-127.2 92.5c-10 7.2-14.2 20.2-10.2 31.8l30.1 87.7c1.3 3.7-2.9 6.8-6.1 4.6l-77.4-55.2c-4.9-3.5-10.6-5.2-16.3-5.2-5.7 0-11.4 1.7-16.2 5.2l-77.4 55.1c-3.2 2.3-7.4-.9-6.1-4.6l30.1-87.7c4-11.8-.2-24.8-10.3-32l-81-57.1c-3.2-2.2-1.6-7.3 2.3-7.3H196c12 0 22.7-7.7 26.5-19.1l29.6-88.2c1.2-3.6 6.4-3.6 7.6 0l29.6 88.2c3.8 11.4 14.5 19.1 26.5 19.1h97.3c3.9 0 5.5 5 2.3 7.2l-79.6 57.5z"/></symbol>
  <symbol id="svg-all" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></symbol>
  <symbol id="svg-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
  </symbol>
  <symbol id="svg-movie" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-film"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>
  </symbol>
  <symbol id="svg-music" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-music"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>
  </symbol>
  <symbol id="svg-tv" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tv"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline></symbol>
</svg>

<!-- NOTE TEMPLATE -->

<template id="tpl-note">
  <article class="note" :class="{'note--open': open}">
    <div class="note-image-wrapper">
      <span class="note-type" :class="`type-${type}`">
        <svg class="note-type-icon"><use :href="`#svg-${type}`" /></svg>
      </span>
      <img :src="`/media/notes/${image}`" class="note-image" />
    </div>
    <h2 class="note-title">{{ title }}</h2>
    <div class="note-top-bar">
      <span class="note-review-date">{{ formattedReviewDate }}</span>
    </div>
    <note-rating v-if="rating" :stars="rating"></note-rating>
    <div class="note-meta">
      <span class="note-publish-date">{{ publishDate }}</span> | <span class="note-creator">{{ creatorLabel }}</span>
    </div>
    <div v-if="contents" class="note-body" @click="open = true">
      <div v-if="open" v-html="contents"></div>
      <div v-else v-html="excerpt" class="note-excerpt"></div>
    </div>
  </article>
</template>

<template id="tpl-note-rating">
  <div class="note-rating">
    <svg v-for="n in fullStars" class="note-rating-star"><use href="#svg-star"></use></svg>
    <svg v-if="halfStar" class="note-rating-star"><use href="#svg-star-half"></svg>
    <svg v-for="n in emptyStars" class="note-rating-star"><use href="#svg-star-outline"></svg>
  </div>
</template>

<template id="tpl-note-filter">
  <div :class="['note-filter', `type-${type}`, { 'note-filter--checked': type === value }]">
      <input type="radio" name="note-filter" class="note-filter-radio" :value="type" :id="`filter-${type}`" @change="onChange" />
      <label class="note-filter-label" :for="`filter-${type}`">
        <svg class="note-filter-label-icon"><use :href="`#svg-${type}`" /></svg>
        <slot />
      </label>
  </div>
</template>

<div id="app">
  <div>
    <section class="note-controls">
      <div class="note-filters">
        <note-filter type="all" v-model="filter">All</note-filter>
        <note-filter type="movie" v-model="filter">Movies</note-filter>
        <note-filter type="tv" v-model="filter">TV</note-filter>
        <note-filter type="book" v-model="filter">Books</note-filter>
        <note-filter type="music" v-model="filter">Music</note-filter>
      </div>
      <div class="note-sort">
        <span class="note-sort-label">Sort by:</span>
        <select class="note-sort-select" v-model="sort">
          <option value="review-date-desc">Review date</option>
          <option value="rating-desc">Rating: High to low</option>
          <option value="rating-asc">Rating: Low to high</option>
          <option value="publish-date-desc">Publish date: New to old</option>
          <option value="publish-date-asc">Publish date: Old to new</option>
        </select>
      </div>
    </section>
    <section class="notes-grid" :class="`notes-sort-${sort}`">
      <note
        v-for="note in displayNotes"
        :type="note.type"
        :title="note.title"
        :creator="note.creator"
        :publish-date="note.publishDate"
        :image="note.image"
        :rating="note.rating"
        :review-date="note.reviewDate"
        :excerpt="note.excerpt"
        :contents="note.contents"
      >
      </note>    
    </section>
  </div>
</div>

<style>
:root {
  --book-color: #F5914A;
  --movie-color: #3DAFD1;
  --music-color: #FB84E2;
  --tv-color: #C6B848;

  --note-control-height-xs: 2.75em;
  --note-control-height: 2.5em;
}

/* COLOR CLASSES ------------------------------------- */

.type-all {
  --type-color: var(--color);
}

.type-book {
  --type-color: var(--book-color);
}

.type-movie {
  --type-color: var(--movie-color);
}

.type-music {
  --type-color: var(--music-color);
}

.type-tv {
  --type-color: var(--tv-color);
}

/* FILTERS ------------------------------------- */

.note-controls {
  font-family: var(--font-ui);
  padding-bottom: 1rem;
  margin-bottom: 2rem;
  border-bottom: 1px solid var(--border-color-light);
}

.note-filters {
  display: flex;
  overflow-x: auto;
  padding: 0 calc(var(--gutter));
  margin: 0 calc(var(--gutter) * -1);
}

.note-filter {
  margin: 0 4px 12px 0;
}

.note-filter-radio {
  display: none;
}

.note-filter-label {
  display: inline-flex;
  align-items: center;
  padding: 0 0.6em 0;
  height: var(--note-control-height-xs);
  margin-right: 0.25em;
  font-size: 0.9375rem;
  font-weight: var(--weight-bold);
  border-radius: var(--radius);
  border: 2px solid var(--type-color);
  cursor: pointer;
  color: var(--type-color);
}

.note-filter-label-icon {
  width: 16px;
  height: 16px;
  margin-right: 4px;
}

.note-filter:hover .note-filter-label,
.note-filter--checked .note-filter-label {
  color: white;
  background: var(--type-color);
}

@media (min-width: 800px) {
  .note-controls {
    display: flex;
    justify-content: space-between;
  }

  .note-filter {
    margin: 0 2px 6px 0;
  }

  .note-filter-label {
    font-size: 0.8125rem;
    height: var(--note-control-height);
  }
}


/* SORT -----------------------------------------*/

.note-sort {
  font-weight: var(--weight-bold);
  color: var(--muted-color);
}

.note-sort-label {
  display: none;
  margin-right: 4px;
}

.note-sort-select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  padding: 0 1.6em 0 0.6em;
  height: var(--note-control-height-xs);
  font-size: 0.9375rem;
  font-weight: var(--weight-bold);  
  border-radius: var(--radius);
  border: 2px solid var(--color);
  cursor: pointer;  
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
  background-repeat: no-repeat;
  background-position: right .7em top 50%;
  background-size: .65em auto;
  outline: none;
}

.notes-sort-publish-date-desc .note-publish-date,
.notes-sort-publish-date-asc .note-publish-date {
  color: var(--primary-color);
}

.notes-sort-rating-desc .note-rating svg,
.notes-sort-rating-asc .note-rating svg{
  fill: var(--primary-color);
}

.notes-sort-review-date-desc .note-review-date {
  color: var(--primary-color);
}

@media (min-width: 800px) {
  .note-sort-label {
    display: inline;
  }

  .note-sort-select {
    font-size: 0.8125rem;
    height: var(--note-control-height);
  }
}

/* NOTES GRID -----------------------------------------*/

.notes-grid {
  display: grid;
}

/* NOTE -----------------------------------------*/


.note {
  position: relative;
  overflow: hidden;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border-color-light);
}

.note::after {
  content: '';
  position: absolute;
  background: linear-gradient( rgba(255, 255, 255, 0), var(--bg-color) 80%, var(--bg-color));
  bottom: 0;
  width: 100%;
  height: 3rem;
  pointer-events: none;
}

.note--open {
  max-height: none;
}

.note--open::after {
  display: none;
}

/*
margin = img width + margin 
On hover, we change the bg color of the excerpt. This left margin makes the
container start to the right of the image. W/o it the container goes under
the floated image.
*/
.note-excerpt {
  margin-left: 7rem;
}

.note-excerpt:hover {
  background-color: var(--hover-bg-color);
  border-radius: var(--radius);
}

.note-excerpt p {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.note-read-more {
  font-weight: var(--weight-bold);
}

.note p:last-of-type{
  margin-bottom: 8px;
}

.note-image-wrapper {
  position: relative;
  float: left;
  width: 6rem;
  margin: 0 1rem 0.5rem 0;
}

.note-type {
  position: absolute;
  bottom: 8px;
  right: 8px;
  display: flex;
  padding: 6px;
  color: white;
  background: var(--type-color);
  border-radius: 50%;
  border: 1px solid white;
}

.note-type-icon {
  width: 16px;
  height: 16px;
}


.note-image {
  width: 100%;
  border-radius: var(--radius);
}

.note-top-bar {
  margin-bottom: 4px;
  font-size: 0.8125rem;
  font-weight: var(--weight-x-bold);
  text-transform: uppercase;
}

@media (min-width: 800px) {
  .notes-grid {
    grid-template-columns: 1fr 1fr;
    grid-gap: 16px;
    grid-column-gap: 32px;
  }

  .note-image-wrapper {
    width: 8rem;
  }

  .note-excerpt {
    /* Img width and margin */
    margin-left: 9rem;
  }
}

.note-title {
  margin: 0 0 0.05em 0;
}

.note-title a {
  text-decoration: none;
}

.note-title a:hover {
  text-decoration: underline;
}

.note-meta {
  font-size: 1rem;
  font-weight: var(--weight-bold);
  color: var(--muted-color);
  margin-bottom: 2px;
}

.note-body { 
  cursor: pointer;
  font-size: 0.9375rem;
}

.note--open {
  cursor: auto;
}


/* STAR RATING -----------------------------------------*/

.note-rating {
  display: flex;
  margin-bottom: 4px;
}
.note-rating svg {
  width: 20px;
  height: 20px;
}

</style>

<script src="/js/vue.min.js"></script>
<script>
Vue.component('note-filter', {
  template: '#tpl-note-filter',
  
  model: {
    event: 'change'
  },

  props: {
    type: String,
    value: String,
  },

  methods: {
    onChange(event) {
      this.$emit('change', event.target.value);
    }
  },
});

Vue.component('note-rating', {
  template: '#tpl-note-rating',
  props: {
    stars: Number,
  },
  computed: {
    fullStars() {
      return Math.floor(this.stars);
    },
    halfStar() {
      return !Number.isInteger(this.stars);
    },
    emptyStars() {
      return Math.floor(5 - this.stars);
    }
  }
});

const MS_IN_DAY = 1000 * 60 * 60 * 24;
const MS_IN_MONTH = MS_IN_DAY * 30;

Vue.component('note', {
  template: '#tpl-note',
  props: {
    type: String,
    title: String,
    creator: String,
    publishDate: String,
    image: String,
    rating: Number,
    reviewDate: String,
    excerpt: String,
    contents: String,
  },
  data() {
    return {
      open: false,
    };
  },
  computed: {
    creatorLabel() {
      switch (this.type) {
        case 'book':
          return `Written by ${this.creator}`;
        break;
        case 'movie':
        case 'tv':
          return `Directed by ${this.creator}`;
        break;
        case 'music':
          return `by ${this.creator}`;
        break;
      }
    },
    formattedReviewDate() {
      const diff = new Date() - new Date(this.reviewDate);
      if (diff < MS_IN_DAY) {
        return 'Today';
      } else if (diff < MS_IN_DAY * 2) {
        return 'Yesterday';
      } else if (diff < MS_IN_DAY * 7) {
        return 'This week';
      } else if (diff < MS_IN_DAY * 14) {
        return 'Last week';
      } else if (diff < MS_IN_DAY * 30) { 
        return 'This month';
      } else if (diff < MS_IN_DAY * 60) { 
        return 'Last month';
      } else if (diff < MS_IN_DAY * 180) {
        return `${Math.floor(diff / MS_IN_MONTH)} months ago`;
      } else {
        return this.reviewDate;
      }
    }
  }
})


new Vue({
  el: '#app',
  data() {
    return { 
      notes: [],
      displayNotes: [],
      filter: 'all',
      sort: 'review-date-desc',
    };
  },
  mounted() {
    fetch('/data/notes.json')
      .then(res => res.json())
      .then(json => {
        this.notes = json.data
        this.filterAndSort();
      })
      .catch((error) => {
        console.log(error);
      })
  },
 
  watch: {
    filter: function(val) {
      this.filterAndSort();
    },
    sort: function(val) {
      this.filterAndSort();
    },
  },

  methods: {
    filterAndSort() {
      // Filter
      const filteredNotes = (this.filter === 'all')
        ? this.notes
        : this.notes.filter(note => note.type === this.filter)

      // and Sort
      switch (this.sort) {
        case 'rating-desc':
          this.displayNotes = filteredNotes.sort((a, b) => {
            return b.rating - a.rating;
          });
          break;
        case 'rating-asc':
          this.displayNotes = filteredNotes.sort((a, b) => {
            return a.rating - b.rating;
          });
          break;
        case 'publish-date-desc':
          this.displayNotes = filteredNotes.sort((a, b) => {
            return (new Date(a.publishDate) > new Date(b.publishDate)) ? -1 : 1;
          });
          break;
        case 'publish-date-asc':
          this.displayNotes = filteredNotes.sort((a, b) => {
            return (new Date(a.publishDate) > new Date(b.publishDate)) ? 1 : -1;
          });
          break;
        case 'review-date-desc':
        default:
          this.displayNotes = filteredNotes.sort((a, b) => {
            return (new Date(a.reviewDate) > new Date(b.reviewDate)) ? -1 : 1;
          });
      }
    },
  },
});
</script>
